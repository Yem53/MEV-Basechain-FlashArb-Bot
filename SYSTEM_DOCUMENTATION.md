# ğŸš€ FlashArb V3 - MEV å¥—åˆ©ç³»ç»Ÿå®Œæ•´æ–‡æ¡£

## ğŸ“‹ ç›®å½•

1. [ç³»ç»Ÿæ¦‚è¿°](#1-ç³»ç»Ÿæ¦‚è¿°)
2. [æ¶æ„è®¾è®¡](#2-æ¶æ„è®¾è®¡)
3. [æ ¸å¿ƒæ¨¡å—è¯¦è§£](#3-æ ¸å¿ƒæ¨¡å—è¯¦è§£)
4. [æ™ºèƒ½åˆçº¦](#4-æ™ºèƒ½åˆçº¦)
5. [å·¥å…·è„šæœ¬](#5-å·¥å…·è„šæœ¬)
6. [é…ç½®ç³»ç»Ÿ](#6-é…ç½®ç³»ç»Ÿ)
7. [æ€§èƒ½ä¼˜åŒ–](#7-æ€§èƒ½ä¼˜åŒ–)
8. [å®‰å…¨æœºåˆ¶](#8-å®‰å…¨æœºåˆ¶)
9. [éƒ¨ç½²æŒ‡å—](#9-éƒ¨ç½²æŒ‡å—)
10. [API å‚è€ƒ](#10-api-å‚è€ƒ)

---

## 1. ç³»ç»Ÿæ¦‚è¿°

### 1.1 é¡¹ç›®ç®€ä»‹

**FlashArb V3** æ˜¯ä¸€ä¸ªä¸“ä¸º **Base Chain (OP Stack)** è®¾è®¡çš„é«˜æ€§èƒ½ Uniswap V3 é—ªç”µè´·å¥—åˆ©æœºå™¨äººã€‚

### 1.2 æ ¸å¿ƒç‰¹æ€§

| ç‰¹æ€§ | æè¿° |
|------|------|
| **çº¯ V3 å®ç°** | æ—  V2/Solidly é—ç•™ä»£ç ï¼Œæ›´ä½çš„æ‰‹ç»­è´¹ (0.05% vs 0.3%) |
| **å¤šè´¹ç‡å±‚æ‰«æ** | åŒæ—¶æ‰«æ 0.05%, 0.3%, 1% è´¹ç‡æ±  |
| **åŠ¨æ€é‡‘é¢ä¼˜åŒ–** | é»„é‡‘åˆ†å‰²æœç´¢ç®—æ³•è‡ªåŠ¨æ‰¾æœ€ä¼˜å€Ÿæ¬¾é‡‘é¢ |
| **é›¶å»¶è¿Ÿè®¾è®¡** | é¢„è®¡ç®—åœ°å€ã€é¢„ç¼–ç è°ƒç”¨æ•°æ®ã€å•æ¬¡ Multicall |
| **MEV ä¿æŠ¤** | ç§æœ‰ RPC äº¤æ˜“æäº¤ï¼Œé˜²æ­¢è¢«æŠ¢è·‘ |
| **å¡ä½äº¤æ˜“å¤„ç†** | è‡ªåŠ¨åŠ é€Ÿ/å–æ¶ˆå¡ä½çš„äº¤æ˜“ |

### 1.3 æ”¯æŒçš„ç½‘ç»œ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç½‘ç»œ        â”‚ Chain ID  â”‚ ç‰¹ç‚¹                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Base        â”‚ 8453      â”‚ ä¸»è¦ç›®æ ‡é“¾ï¼Œ2ç§’å‡ºå—ï¼Œä½ Gas              â”‚
â”‚ Ethereum    â”‚ 1         â”‚ ä¸»ç½‘ï¼Œ12ç§’å‡ºå—                           â”‚
â”‚ Arbitrum    â”‚ 42161     â”‚ 0.25ç§’å‡ºå—ï¼Œè¶…å¿«                         â”‚
â”‚ Polygon     â”‚ 137       â”‚ 2ç§’å‡ºå—ï¼ŒMATIC Gas                       â”‚
â”‚ BSC         â”‚ 56        â”‚ 3ç§’å‡ºå—ï¼ŒLegacy Gas                      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 2. æ¶æ„è®¾è®¡

### 2.1 ç³»ç»Ÿæ¶æ„å›¾

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          FlashArb V3 System                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚   main.py   â”‚â”€â”€â”€â–¶â”‚  Scanner    â”‚â”€â”€â”€â–¶â”‚ Calculator  â”‚                 â”‚
â”‚  â”‚  (å…¥å£ç‚¹)   â”‚    â”‚  (æ‰«æå™¨)   â”‚    â”‚  (è®¡ç®—å™¨)   â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                                                               â”‚
â”‚         â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
â”‚  â”‚  Executor   â”‚â”€â”€â”€â–¶â”‚  Network    â”‚â”€â”€â”€â–¶â”‚ Blockchain  â”‚                 â”‚
â”‚  â”‚  (æ‰§è¡Œå™¨)   â”‚    â”‚  Manager    â”‚    â”‚    RPC      â”‚                 â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
â”‚         â”‚                                                               â”‚
â”‚         â–¼                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
â”‚  â”‚              FlashBotV3.sol (æ™ºèƒ½åˆçº¦)              â”‚               â”‚
â”‚  â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚               â”‚
â”‚  â”‚   â”‚ Flash   â”‚  â”‚  Swap   â”‚  â”‚ Repay   â”‚            â”‚               â”‚
â”‚  â”‚   â”‚ Borrow  â”‚â”€â”€â”‚ Execute â”‚â”€â”€â”‚ + Profitâ”‚            â”‚               â”‚
â”‚  â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
â”‚                                                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 2.2 æ•°æ®æµ

```
1. æ‰«æé˜¶æ®µ
   Multicall3 â”€â”€â”€â”€â”€â”€â–¶ æ‰¹é‡è·å– slot0 + liquidity
                           â”‚
                           â–¼
   æœ¬åœ°è®¡ç®— â—€â”€â”€â”€â”€â”€â”€â”€ sqrtPriceX96 ä»·æ ¼è§£æ

2. è®¡ç®—é˜¶æ®µ
   ä»·æ ¼å¯¹æ¯” â”€â”€â”€â”€â”€â”€â–¶ å‘ç°ä»·å·®
                           â”‚
                           â–¼
   é»„é‡‘åˆ†å‰²æœç´¢ â—€â”€â”€â”€â”€ ä¼˜åŒ–å€Ÿæ¬¾é‡‘é¢

3. æ‰§è¡Œé˜¶æ®µ
   æ¨¡æ‹ŸéªŒè¯ â”€â”€â”€â”€â”€â”€â–¶ eth_call æ£€æŸ¥
                           â”‚
                           â–¼
   ç­¾åå¹¿æ’­ â”€â”€â”€â”€â”€â”€â–¶ å‘é€äº¤æ˜“
                           â”‚
                           â–¼
   ç›‘æ§åŠ é€Ÿ â—€â”€â”€â”€â”€â”€â”€â”€ ç­‰å¾…ç¡®è®¤
```

---

## 3. æ ¸å¿ƒæ¨¡å—è¯¦è§£

### 3.1 main.py - ä¸»å…¥å£

**è·¯å¾„**: `main.py`

**åŠŸèƒ½**: ç³»ç»Ÿå…¥å£ç‚¹ï¼Œåè°ƒæ‰€æœ‰æ¨¡å—

```python
class FlashArbBot:
    """
    ä¸»æœºå™¨äººç±»
    
    èŒè´£:
    - åˆå§‹åŒ– Web3 è¿æ¥
    - åŠ è½½æ™ºèƒ½åˆçº¦
    - åˆ›å»º Scanner å’Œ Executor
    - è¿è¡Œä¸»æ‰«æå¾ªç¯
    - å¤„ç†ä¿¡å·ä¸­æ–­
    """
```

**æ ¸å¿ƒæ–¹æ³•**:

| æ–¹æ³• | æè¿° |
|------|------|
| `initialize()` | åˆå§‹åŒ–æ‰€æœ‰ç»„ä»¶ï¼Œå»ºç«‹ç½‘ç»œè¿æ¥ |
| `run()` | ä¸»å¾ªç¯ï¼ŒæŒç»­æ‰«æå’Œæ‰§è¡Œ |
| `_handle_opportunities()` | å¤„ç†å‘ç°çš„å¥—åˆ©æœºä¼š |
| `_execute()` | è°ƒç”¨ Executor æ‰§è¡Œäº¤æ˜“ |
| `_display_status()` | æ˜¾ç¤ºå®æ—¶çŠ¶æ€ |

**HTTP Keep-Alive ä¼˜åŒ–**:
```python
def _create_persistent_session(self) -> requests.Session:
    """
    åˆ›å»ºæŒä¹… HTTP ä¼šè¯
    - è¿æ¥æ± : 10 ä¸ªè¿æ¥
    - æ¯æ± æœ€å¤§: 20 ä¸ªè¿æ¥
    - Keep-Alive: 60ç§’è¶…æ—¶
    """
```

---

### 3.2 core/scanner.py - æ‰«æå™¨

**è·¯å¾„**: `core/scanner.py`

**åŠŸèƒ½**: é«˜æ€§èƒ½ V3 æ± æ‰«æï¼Œå‘ç°å¥—åˆ©æœºä¼š

```python
class V3Scanner:
    """
    é›¶å»¶è¿Ÿæ‰«æå™¨
    
    âš¡ ä¼˜åŒ–:
    1. å¯åŠ¨æ—¶é¢„è®¡ç®—æ‰€æœ‰æ± åœ°å€ (CREATE2)
    2. é¢„ç¼–ç  Multicall è°ƒç”¨æ•°æ®
    3. å•æ¬¡ RPC è·å–æ‰€æœ‰æ± æ•°æ®
    4. çº¯æœ¬åœ°åˆ©æ¶¦è®¡ç®—
    """
```

**æ•°æ®ç»“æ„**:

```python
@dataclass
class V3Pool:
    address: str           # æ± åœ°å€
    token0: str           # Token0 åœ°å€
    token1: str           # Token1 åœ°å€
    fee: int              # è´¹ç‡ (500/3000/10000)
    sqrtPriceX96: int     # å½“å‰ä»·æ ¼ (Q96 æ ¼å¼)
    liquidity: int        # å½“å‰æµåŠ¨æ€§
    price_0_to_1: float   # Token0 â†’ Token1 ä»·æ ¼
    price_1_to_0: float   # Token1 â†’ Token0 ä»·æ ¼

@dataclass
class ArbitrageOpportunity:
    pool_low: V3Pool      # ä½ä»·æ± 
    pool_high: V3Pool     # é«˜ä»·æ± 
    borrow_amount: int    # å€Ÿæ¬¾é‡‘é¢ (wei)
    net_profit: int       # å‡€åˆ©æ¶¦ (wei)
    price_diff_pct: float # ä»·å·®ç™¾åˆ†æ¯”
    direction: str        # å¥—åˆ©æ–¹å‘
```

**æ± åœ°å€è®¡ç®—** (CREATE2):
```python
def compute_pool_address_fast(token0, token1, fee) -> str:
    """
    ç¡®å®šæ€§è®¡ç®— V3 æ± åœ°å€
    
    å…¬å¼: keccak256(0xff + factory + salt + initCodeHash)
    
    æ— éœ€ RPC è°ƒç”¨ï¼
    """
    salt = keccak256(encode(['address', 'address', 'uint24'], [token0, token1, fee]))
    create2_input = b'\xff' + FACTORY_BYTES + salt + INIT_CODE_HASH_BYTES
    return to_checksum_address(keccak256(create2_input)[-20:])
```

**Super-Batch Multicall**:
```python
def update_pool_data(self) -> Tuple[bool, float, int, int]:
    """
    å•æ¬¡ Multicall è·å–æ‰€æœ‰æ± æ•°æ®
    
    è°ƒç”¨ç»“æ„:
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚ Pool1 slot0â”‚ Pool1 liq  â”‚ Pool2 slot0â”‚ ...
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    
    è¿”å›: (æˆåŠŸ, ç½‘ç»œå»¶è¿Ÿms, æ›´æ–°æ•°é‡, åŒºå—å·)
    """
```

---

### 3.3 core/calculator.py - è®¡ç®—å™¨

**è·¯å¾„**: `core/calculator.py`

**åŠŸèƒ½**: é«˜æ€§èƒ½æ•°å­¦è®¡ç®—ï¼Œåˆ©æ¶¦ä¼˜åŒ–

**ä»·æ ¼è®¡ç®—**:
```python
def sqrt_price_x96_to_price(sqrtPriceX96: int, decimals0: int, decimals1: int) -> float:
    """
    å°† sqrtPriceX96 è½¬æ¢ä¸ºå®é™…ä»·æ ¼
    
    å…¬å¼: price = (sqrtPriceX96 / 2^96)Â² Ã— 10^(dec0-dec1)
    
    âš¡ çº¯æ•´æ•°/æµ®ç‚¹è¿ç®—ï¼Œæ—  Decimal
    """
    price_squared = sqrtPriceX96 * sqrtPriceX96
    decimal_adj = 10 ** (decimals0 - decimals1)
    return (price_squared * decimal_adj) / Q96_SQUARED
```

**V3 Swap è¾“å‡ºè®¡ç®—**:
```python
def get_v3_amount_out_fast(amount_in, sqrtPriceX96, liquidity, fee, zero_for_one) -> Tuple[int, int]:
    """
    æœ¬åœ°è®¡ç®— V3 swap è¾“å‡º
    
    V3 å…¬å¼ (å½“å‰ tick):
    - token0 â†’ token1: dy = L Ã— (âˆšP_old - âˆšP_new)
    - token1 â†’ token0: dx = L Ã— (1/âˆšP_new - 1/âˆšP_old)
    
    è¿”å›: (è¾“å‡ºé‡‘é¢, æ‰‹ç»­è´¹)
    """
```

**é»„é‡‘åˆ†å‰²æœç´¢**:
```python
def find_optimal_amount_in_fast(pool_low, pool_high, min_amount, max_amount, precision) -> Tuple[int, int, V3ArbitrageResult]:
    """
    ä½¿ç”¨é»„é‡‘åˆ†å‰²æœç´¢æ‰¾æœ€ä¼˜å€Ÿæ¬¾é‡‘é¢
    
    åŸç†:
    - åˆ©æ¶¦æ›²çº¿æ˜¯å•å³°çš„
    - å¤ªå°: æ‰‹ç»­è´¹å æ¯”é«˜
    - å¤ªå¤§: æ»‘ç‚¹è¿‡å¤§
    - æœ€ä¼˜ç‚¹åœ¨ä¸­é—´æŸå¤„
    
    é»„é‡‘æ¯”ä¾‹: Ï† = 1.618033988749895
    
    è¿”å›: (æœ€ä¼˜é‡‘é¢, æœ€å¤§åˆ©æ¶¦, è¯¦ç»†ç»“æœ)
    """
```

---

### 3.4 core/executor.py - æ‰§è¡Œå™¨

**è·¯å¾„**: `core/executor.py`

**åŠŸèƒ½**: äº¤æ˜“æ„å»ºã€ç­¾åã€å¹¿æ’­ã€ç›‘æ§

```python
class V3Executor:
    """
    é«˜æ€§èƒ½äº¤æ˜“æ‰§è¡Œå™¨
    
    âš¡ ä¼˜åŒ–:
    1. æ¿€è¿›çš„ EIP-1559 Gas ç­–ç•¥ (2x ä¼˜å…ˆè´¹)
    2. ç¼“å­˜çš„ Nonce ç®¡ç†
    3. é¢„è®¡ç®— Gas å‚æ•°
    4. EIP-2930 Access Lists
    5. ç§æœ‰ RPC äº¤æ˜“æäº¤
    6. å¡ä½äº¤æ˜“è‡ªåŠ¨åŠ é€Ÿ
    """
```

**EIP-1559 Sniper æ¨¡å¼**:
```python
def _get_gas_params_aggressive(self) -> Dict[str, int]:
    """
    æ¿€è¿› Gas ç­–ç•¥ (ç”¨äº HFT)
    
    è®¡ç®—:
    - maxPriorityFeePerGas = ç½‘ç»œå¹³å‡ Ã— 2.0
    - maxFeePerGas = baseFee Ã— 2 + priorityFee
    
    ç›®æ ‡: è¶…è¶Šå¤§å¤šæ•°ç«äº‰è€…
    """
```

**Access List (Gas ä¼˜åŒ–)**:
```python
def _build_access_list(self, pool, token0, token1, router) -> List[Dict]:
    """
    æ„å»º EIP-2930 Access List
    
    é¢„å£°æ˜è®¿é—®çš„å­˜å‚¨æ§½:
    - V3 Pool (slot0, liquidity, flash)
    - Token0 (balanceOf, transfer)
    - Token1 (balanceOf, transfer)
    - SwapRouter (exactInputSingle)
    
    æ•ˆæœ: Cold SLOAD 2100 gas â†’ 100 gas
    """
```

**å¡ä½äº¤æ˜“å¤„ç†**:
```python
def send_and_monitor(self, tx_params, signed_tx, nonce, gas_params) -> TransactionMonitorResult:
    """
    æ™ºèƒ½äº¤æ˜“ç›‘æ§å™¨
    
    æµç¨‹:
    1. å‘é€åˆå§‹äº¤æ˜“
    2. 5ç§’è¶…æ—¶ç­‰å¾…
    3. æœªç¡®è®¤? â†’ åˆ›å»ºæ›¿æ¢äº¤æ˜“ (SAME nonce + æ›´é«˜ gas)
    4. é‡å¤ç›´åˆ°ç¡®è®¤æˆ–è¾¾åˆ°ä¸Šé™
    
    é…ç½®:
    - TX_SPEEDUP_GAS_BUMP_PCT: 15% (æ¯æ¬¡åŠ é€Ÿå¢åŠ )
    - TX_MAX_GAS_GWEI: 50 gwei (ä¸Šé™)
    - TX_MAX_SPEEDUP_ATTEMPTS: 5 (æœ€å¤§å°è¯•)
    """
```

---

### 3.5 core/network.py - ç½‘ç»œç®¡ç†å™¨

**è·¯å¾„**: `core/network.py`

**åŠŸèƒ½**: å¥å£®çš„å¼‚æ­¥ç½‘ç»œå±‚

```python
class NetworkManager:
    """
    ç½‘ç»œç®¡ç†å™¨
    
    åŠŸèƒ½:
    - RPC æ•…éšœè½¬ç§»æ”¯æŒ
    - é€Ÿç‡é™åˆ¶çš„æŒ‡æ•°é€€é¿
    - EIP-1559 å’Œ Legacy Gas å¤„ç†
    - æŒä¹…åŒ– aiohttp ä¼šè¯
    - æ¯ä¸ª RPC çš„å¥åº·çŠ¶æ€è¿½è¸ª
    """
```

**RPC å¥åº·è¿½è¸ª**:
```python
@dataclass
class RPCHealth:
    url: str
    is_healthy: bool = True
    last_success: float = 0.0
    last_failure: float = 0.0
    consecutive_failures: int = 0
    avg_latency_ms: float = 0.0
    total_requests: int = 0
```

**æ•…éšœè½¬ç§»é€»è¾‘**:
```python
async def _switch_to_next_rpc(self):
    """
    åˆ‡æ¢åˆ°ä¸‹ä¸€ä¸ªå¥åº·çš„ RPC
    
    ç­–ç•¥:
    1. éå†æ‰€æœ‰ç«¯ç‚¹
    2. ä¼˜å…ˆé€‰æ‹© is_healthy=True çš„èŠ‚ç‚¹
    3. å¦‚æœå…¨éƒ¨ä¸å¥åº·ï¼Œé‡ç½®çŠ¶æ€å¹¶é‡è¯•
    """
```

---

### 3.6 core/config_loader.py - é…ç½®åŠ è½½å™¨

**è·¯å¾„**: `core/config_loader.py`

**åŠŸèƒ½**: åŠ è½½å’ŒéªŒè¯é…ç½®

```python
class ConfigLoader:
    """
    é…ç½®ç®¡ç†å™¨
    
    åŠŸèƒ½:
    - ä» JSON åŠ è½½é“¾é…ç½®
    - ä» .env åŠ è½½æ•æ„Ÿä¿¡æ¯
    - éªŒè¯å¿…éœ€å­—æ®µ
    - æ”¯æŒ RPC URL è¦†ç›–
    """
```

**é“¾é…ç½®ç»“æ„**:
```python
@dataclass
class ChainConfig:
    name: str              # é“¾åç§° (å¦‚ "BASE")
    chain_id: int          # Chain ID (å¦‚ 8453)
    rpc_urls: List[str]    # RPC ç«¯ç‚¹åˆ—è¡¨
    native_token: str      # åŸç”Ÿä»£å¸ (å¦‚ "ETH")
    wnative_address: str   # WETH åœ°å€
    dex_routers: Dict      # DEX è·¯ç”±å™¨åœ°å€
    gas_config: GasConfig  # Gas é…ç½®
    block_time: float      # å‡ºå—æ—¶é—´ (ç§’)
    private_key: str       # ç§é’¥ (ä» .env)
```

---

## 4. æ™ºèƒ½åˆçº¦

### 4.1 FlashBotV3.sol - ä¸»åˆçº¦

**è·¯å¾„**: `contracts/FlashBotV3.sol`

**åŠŸèƒ½**: V3 é—ªç”µè´·å¥—åˆ©æ‰§è¡Œ

```solidity
contract FlashBotV3 is IUniswapV3FlashCallback {
    
    // Base Mainnet å¸¸é‡
    address public constant V3_FACTORY = 0x33128a8fC17869897dcE68Ed026d694621f6FDfD;
    address public constant SWAP_ROUTER = 0x2626664c2603336E57B271c5C0b26F421741e481;
    address public constant WETH = 0x4200000000000000000000000000000000000006;
    
    /**
     * @notice å¯åŠ¨å¥—åˆ©
     * @param pool é—ªç”µè´·æ¥æºæ± 
     * @param tokenBorrow å€Ÿå…¥çš„ä»£å¸
     * @param amount å€Ÿå…¥é‡‘é¢
     * @param swapData ç¼–ç çš„ swap å‚æ•°
     */
    function startArbitrage(
        address pool,
        address tokenBorrow,
        uint256 amount,
        bytes calldata swapData
    ) external onlyOwner;
    
    /**
     * @notice V3 é—ªç”µè´·å›è°ƒ (Gas ä¼˜åŒ–ç‰ˆ)
     * @dev ä½¿ç”¨ Assembly ä¼˜åŒ– ERC20 æ“ä½œ
     */
    function uniswapV3FlashCallback(
        uint256 fee0,
        uint256 fee1,
        bytes calldata data
    ) external override;
}
```

**æ‰§è¡Œæµç¨‹**:
```
1. startArbitrage() è§¦å‘ pool.flash()
           â”‚
           â–¼
2. Pool å‘é€å€Ÿæ¬¾åˆ°åˆçº¦
           â”‚
           â–¼
3. Pool è°ƒç”¨ uniswapV3FlashCallback()
           â”‚
           â–¼
4. å›è°ƒå†…æ‰§è¡Œ swap (SwapRouter)
           â”‚
           â–¼
5. å¿è¿˜å€Ÿæ¬¾ + æ‰‹ç»­è´¹
           â”‚
           â–¼
6. ä¿ç•™åˆ©æ¶¦
```

**Assembly ä¼˜åŒ–**:
```solidity
// ä¼ ç»Ÿæ–¹å¼ (~400 gas)
IERC20(token).balanceOf(address(this));

// Assembly æ–¹å¼ (~100 gas)
function _getBalance(address token, address account) internal view returns (uint256 balance) {
    assembly {
        let ptr := mload(0x40)
        mstore(ptr, 0x70a0823100000000000000000000000000000000000000000000000000000000)
        mstore(add(ptr, 0x04), account)
        let success := staticcall(gas(), token, ptr, 0x24, ptr, 0x20)
        if iszero(success) { revert(0, 0) }
        balance := mload(ptr)
    }
}
```

### 4.2 æ¥å£æ–‡ä»¶

**è·¯å¾„**: `contracts/interfaces/IUniswapV3.sol`

åŒ…å«:
- `IERC20` - ERC20 æ ‡å‡†æ¥å£
- `IUniswapV3Pool` - V3 æ± æ¥å£ (slot0, flash, liquidity)
- `IUniswapV3Factory` - å·¥å‚æ¥å£
- `IUniswapV3FlashCallback` - é—ªç”µè´·å›è°ƒæ¥å£
- `ISwapRouter` - SwapRouter æ¥å£

---

## 5. å·¥å…·è„šæœ¬

### 5.1 scripts/market_screener.py - å¸‚åœºç­›é€‰å™¨

**åŠŸèƒ½**: åˆ†æ Base é“¾ä»£å¸ï¼Œå‘ç°è·¨ DEX å¥—åˆ©æœºä¼š

```bash
# ä½¿ç”¨æ–¹æ³•
python scripts/market_screener.py
python scripts/market_screener.py --min-liquidity 50000 --min-spread 0.5
```

**è¾“å‡ºç¤ºä¾‹**:
```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                    FlashArb Market Screener v1.0                     â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘  Token  â”‚  DEX1  â”‚  Price1  â”‚  DEX2  â”‚  Price2  â”‚ Spread â”‚ Liquidity â•‘
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â•‘  BRETT  â”‚  Uni   â”‚ 0.00123  â”‚  Aero  â”‚ 0.00125  â”‚ 1.62%  â”‚  $2.5M    â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

### 5.2 scripts/withdraw.py - èµ„é‡‘æå–

**åŠŸèƒ½**: ä»åˆçº¦æå– WETH/ETH åˆ° Owner é’±åŒ…

```python
# ä¸»è¦åŠŸèƒ½
1. æŸ¥è¯¢åˆçº¦ WETH ä½™é¢
2. æŸ¥è¯¢åˆçº¦ ETH ä½™é¢
3. è°ƒç”¨ withdrawToken() æå– WETH
4. è°ƒç”¨ withdrawETH() æå– ETH
```

### 5.3 scripts/fund_contract.py - åˆçº¦æ³¨èµ„

**åŠŸèƒ½**: å‘åˆçº¦è½¬å…¥ WETH ä½œä¸ºå¯åŠ¨èµ„é‡‘

```python
# æ™ºèƒ½é€»è¾‘
1. æ£€æŸ¥é’±åŒ… WETH ä½™é¢
2. å¦‚æœæœ‰ WETH â†’ ç›´æ¥è½¬è´¦
3. å¦‚æœæ²¡æœ‰ â†’ Wrap ETH â†’ è½¬è´¦
```

### 5.4 scripts/deploy.py - åˆçº¦éƒ¨ç½²

**åŠŸèƒ½**: ç¼–è¯‘å¹¶éƒ¨ç½² FlashBotV3 åˆçº¦

### 5.5 scripts/test_flash.py - é—ªç”µè´·æµ‹è¯•

**åŠŸèƒ½**: æµ‹è¯•é—ªç”µè´·åŠŸèƒ½æ˜¯å¦æ­£å¸¸

---

## 6. é…ç½®ç³»ç»Ÿ

### 6.1 ç¯å¢ƒå˜é‡ (.env)

```env
# ============================================
# ç½‘ç»œé…ç½®
# ============================================
RPC_URL=https://mainnet.base.org
CHAIN_ID=8453
RPC_TIMEOUT=30

# ============================================
# é’±åŒ…é…ç½® (å¿…éœ€)
# ============================================
PRIVATE_KEY=your_private_key_here

# ============================================
# åˆçº¦åœ°å€
# ============================================
FLASHBOT_ADDRESS=0x...your_deployed_contract

# ============================================
# V3 å¸¸é‡ (Base Mainnet)
# ============================================
WETH=0x4200000000000000000000000000000000000006
V3_FACTORY=0x33128a8fC17869897dcE68Ed026d694621f6FDfD
SWAP_ROUTER=0x2626664c2603336E57B271c5C0b26F421741e481
MULTICALL3=0xcA11bde05977b3631167028862bE2a173976CA11

# ============================================
# å¥—åˆ©è®¾ç½®
# ============================================
MIN_PROFIT_ETH=0.0001      # æœ€å°åˆ©æ¶¦é˜ˆå€¼
MIN_BORROW_ETH=0.01        # æœ€å°å€Ÿæ¬¾é‡‘é¢
MAX_BORROW_ETH=20.0        # æœ€å¤§å€Ÿæ¬¾é‡‘é¢
FEE_TIERS=500,3000,10000   # æ‰«æçš„è´¹ç‡å±‚

# ============================================
# Gas è®¾ç½®
# ============================================
MAX_GAS_GWEI=10            # æœ€å¤§ Gas ä»·æ ¼
GAS_LIMIT=500000           # Gas é™åˆ¶
SNIPER_MODE_ENABLED=true   # ç‹™å‡»æ¨¡å¼
SNIPER_MODE_MULTIPLIER=2.0 # ä¼˜å…ˆè´¹å€æ•°

# ============================================
# è¿è¡Œæ¨¡å¼
# ============================================
DRY_RUN=true               # æ¨¡æ‹Ÿè¿è¡Œ
DEBUG_MODE=false           # è°ƒè¯•æ¨¡å¼
LATENCY_PROFILING=true     # å»¶è¿Ÿåˆ†æ
SHADOW_MODE_ENABLED=true   # å½±å­æ¨¡å¼

# ============================================
# å®‰å…¨é™åˆ¶
# ============================================
MAX_CONSECUTIVE_FAILURES=5
MAX_TX_PER_HOUR=100
MIN_BALANCE_ETH=0.01
```

### 6.2 é“¾é…ç½® (config/chains.json)

```json
{
    "BASE": {
        "chain_id": 8453,
        "rpc_urls": [
            "https://mainnet.base.org",
            "https://base.llamarpc.com"
        ],
        "native_token": "ETH",
        "wnative_address": "0x4200000000000000000000000000000000000006",
        "dex_routers": {
            "uniswap_v3": "0x2626664c2603336E57B271c5C0b26F421741e481",
            "aerodrome": "0xcF77a3Ba9A5CA399B7c97c74d54e5b1Beb874E43"
        },
        "gas_config": {
            "type": "eip1559",
            "priority_fee_multiplier": 1.1,
            "max_fee_multiplier": 1.3
        },
        "block_time": 2
    }
}
```

---

## 7. æ€§èƒ½ä¼˜åŒ–

### 7.1 ä¼˜åŒ–æ¸…å•

| ä¼˜åŒ–é¡¹ | æŠ€æœ¯ | æ•ˆæœ |
|--------|------|------|
| **JSON è§£æ** | orjson | 10x æ›´å¿« |
| **HTTP è¿æ¥** | Keep-Alive + è¿æ¥æ±  | å‡å°‘ TCP æ¡æ‰‹ |
| **RPC è°ƒç”¨** | Super-Batch Multicall | 1 RPC = N æ± æ•°æ® |
| **åœ°å€è®¡ç®—** | CREATE2 é¢„è®¡ç®— | 0 RPC è°ƒç”¨ |
| **ä»·æ ¼è®¡ç®—** | çº¯æ•´æ•°/æµ®ç‚¹è¿ç®— | æ—  Decimal å¼€é”€ |
| **Gas ä¼˜åŒ–** | EIP-2930 Access Lists | ~1000 gas èŠ‚çœ |
| **Solidity** | Assembly ä¼˜åŒ– | ~500 gas èŠ‚çœ |

### 7.2 å»¶è¿Ÿåˆ†æ

```
å…¸å‹æ‰§è¡Œæ—¶é—´:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ é˜¶æ®µ            â”‚ æ—¶é—´         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Multicall æ‰«æ  â”‚ 50-100ms     â”‚
â”‚ æœ¬åœ°è®¡ç®—        â”‚ 1-5ms        â”‚
â”‚ äº¤æ˜“æ¨¡æ‹Ÿ        â”‚ 20-50ms      â”‚
â”‚ ç­¾å            â”‚ 1-2ms        â”‚
â”‚ å¹¿æ’­            â”‚ 10-30ms      â”‚
â”‚ ç¡®è®¤ (Base)     â”‚ 2000ms       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ€»è®¡ (åˆ°å¹¿æ’­)   â”‚ ~100ms       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 8. å®‰å…¨æœºåˆ¶

### 8.1 äº”å±‚å®‰å…¨é˜²æŠ¤

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    å®‰å…¨é˜²æŠ¤å±‚                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Layer 1: L1 Data Fee è®¡ç®—                                  â”‚
â”‚  â”œâ”€â”€ OVM GasPriceOracle (0x420...00F)                      â”‚
â”‚  â””â”€â”€ Total Cost = L2 Gas + L1 Data Fee                     â”‚
â”‚                                                             â”‚
â”‚  Layer 2: Quoter éªŒè¯                                       â”‚
â”‚  â”œâ”€â”€ æœ¬åœ°æ•°å­¦å¯èƒ½ä¸å‡†ç¡® (tick crossing)                     â”‚
â”‚  â””â”€â”€ QuoterV2 è·å–çœŸå®è¾“å‡º                                  â”‚
â”‚                                                             â”‚
â”‚  Layer 3: æ»‘ç‚¹ä¿æŠ¤                                          â”‚
â”‚  â”œâ”€â”€ NEVER send amountOutMinimum = 0                       â”‚
â”‚  â””â”€â”€ é»˜è®¤ 0.5% æ»‘ç‚¹å®¹å¿                                     â”‚
â”‚                                                             â”‚
â”‚  Layer 4: Stale Data æ£€æµ‹                                   â”‚
â”‚  â”œâ”€â”€ æ£€æŸ¥åŒºå—å·æ˜¯å¦é€’å¢                                     â”‚
â”‚  â””â”€â”€ è·³è¿‡è¿‡æ—¶æ•°æ®çš„æ‰«æå‘¨æœŸ                                 â”‚
â”‚                                                             â”‚
â”‚  Layer 5: æ¨¡æ‹ŸéªŒè¯                                          â”‚
â”‚  â”œâ”€â”€ eth_call æ£€æŸ¥äº¤æ˜“æ˜¯å¦ä¼š revert                        â”‚
â”‚  â””â”€â”€ åˆçº¦å†…ç½® NoProfit æ£€æŸ¥                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 8.2 MEV ä¿æŠ¤

```python
# ç§æœ‰ RPC ç«¯ç‚¹ (ä¸æš´éœ²åˆ°å…¬å…± mempool)
PRIVATE_RPC_ENDPOINTS = [
    "https://base.llamarpc.com",      # LlamaNodes
    "https://base-mainnet.blastapi.io" # BlastAPI
]

# ä½¿ç”¨ eth_sendPrivateTransaction
def send_private_transaction(self, signed_tx, max_block_number):
    """
    é€šè¿‡ç§æœ‰ RPC å‘é€äº¤æ˜“
    - ä¸å¹¿æ’­åˆ°å…¬å…± mempool
    - ç›´æ¥å‘é€ç»™åŒºå—æ„å»ºè€…
    - é˜²æ­¢è¢«æŠ¢è·‘
    """
```

---

## 9. éƒ¨ç½²æŒ‡å—

### 9.1 ç¯å¢ƒå‡†å¤‡

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/Yem53/MEV-Basechain-FlashArb-Bot.git
cd MEVå¥—åˆ©

# 2. åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv
source venv/bin/activate  # Linux/Mac
.\venv\Scripts\activate   # Windows

# 3. å®‰è£…ä¾èµ–
pip install -r requirements.txt

# 4. é…ç½®ç¯å¢ƒå˜é‡
cp config/env.template .env
# ç¼–è¾‘ .env å¡«å…¥ä½ çš„é…ç½®
```

### 9.2 éƒ¨ç½²åˆçº¦

```bash
# ä½¿ç”¨ Foundry
forge create --rpc-url $RPC_URL \
    --private-key $PRIVATE_KEY \
    contracts/FlashBotV3.sol:FlashBotV3

# æˆ–ä½¿ç”¨ Python è„šæœ¬
python scripts/deploy.py
```

### 9.3 å¯åŠ¨æœºå™¨äºº

```bash
# æ¨¡æ‹Ÿè¿è¡Œ (æ¨èå…ˆæµ‹è¯•)
DRY_RUN=true python main.py

# ç”Ÿäº§è¿è¡Œ
DRY_RUN=false python main.py

# ä½¿ç”¨ PyPy (æ›´å¿«)
pypy3 main.py
```

---

## 10. API å‚è€ƒ

### 10.1 Scanner API

```python
from core.scanner import V3Scanner

scanner = V3Scanner(w3, target_tokens, fee_tiers, min_liquidity)

# å‘ç°æ± 
pools = scanner.discover_pools(base_token=WETH)

# æ‰«æå¥—åˆ©æœºä¼š
result = scanner.scan(min_profit_wei=MIN_PROFIT_WEI)

# ç»“æœ
result.opportunities    # å¥—åˆ©æœºä¼šåˆ—è¡¨
result.pools_scanned    # æ‰«æçš„æ± æ•°
result.pools_active     # æ´»è·ƒæ± æ•°
result.time_network_ms  # ç½‘ç»œå»¶è¿Ÿ
result.time_calc_ms     # è®¡ç®—æ—¶é—´
```

### 10.2 Executor API

```python
from core.executor import V3Executor

executor = V3Executor(w3, contract, private_key, gas_limit, max_gas_gwei)

# æ‰§è¡Œå¥—åˆ©
result = executor.execute(
    pool_address="0x...",
    token_borrow=WETH,
    amount=int(1e18),
    target_token="0x...",
    target_fee=3000,
    expected_profit=int(0.001e18),
    dry_run=False
)

# ç»“æœ
result.success          # æ˜¯å¦æˆåŠŸ
result.tx_hash          # äº¤æ˜“å“ˆå¸Œ
result.gas_used         # ä½¿ç”¨çš„ Gas
result.time_sim_ms      # æ¨¡æ‹Ÿæ—¶é—´
result.time_sign_ms     # ç­¾åæ—¶é—´
result.time_broadcast_ms # å¹¿æ’­æ—¶é—´
result.speedup_attempts # åŠ é€Ÿå°è¯•æ¬¡æ•°
```

### 10.3 Calculator API

```python
from core.calculator import (
    sqrt_price_x96_to_price,
    get_v3_amount_out_fast,
    find_optimal_amount_in_fast,
    quick_profit_check_fast
)

# ä»·æ ¼è½¬æ¢
price = sqrt_price_x96_to_price(sqrtPriceX96, decimals0, decimals1)

# è®¡ç®— swap è¾“å‡º
amount_out, fee = get_v3_amount_out_fast(amount_in, sqrtPriceX96, liquidity, fee, zero_for_one)

# æ‰¾æœ€ä¼˜é‡‘é¢
best_amount, max_profit, result = find_optimal_amount_in_fast(pool_low, pool_high)

# å¿«é€Ÿç›ˆåˆ©æ£€æŸ¥
is_profitable, diff_pct = quick_profit_check_fast(pool_a, pool_b)
```

---

## ğŸ“Š ç³»ç»Ÿç»Ÿè®¡

```
ä»£ç è¡Œæ•°ç»Ÿè®¡:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ æ–‡ä»¶                â”‚ è¡Œæ•°      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ main.py             â”‚ ~600      â”‚
â”‚ core/executor.py    â”‚ ~500      â”‚
â”‚ core/scanner.py     â”‚ ~660      â”‚
â”‚ core/calculator.py  â”‚ ~400      â”‚
â”‚ core/network.py     â”‚ ~770      â”‚
â”‚ FlashBotV3.sol      â”‚ ~400      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ æ€»è®¡                â”‚ ~3,330+   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“ æ›´æ–°æ—¥å¿—

### v1.0.0 (2024-12)
- âœ… çº¯ V3 å®ç°
- âœ… å¤šè´¹ç‡å±‚æ‰«æ
- âœ… åŠ¨æ€é‡‘é¢ä¼˜åŒ–
- âœ… EIP-1559 Sniper æ¨¡å¼
- âœ… HTTP Keep-Alive
- âœ… orjson å¿«é€Ÿ JSON
- âœ… EIP-2930 Access Lists
- âœ… Assembly ä¼˜åŒ–åˆçº¦
- âœ… ç§æœ‰ RPC æ”¯æŒ
- âœ… å¡ä½äº¤æ˜“å¤„ç†
- âœ… äº”å±‚å®‰å…¨é˜²æŠ¤

---

## ğŸ“œ è®¸å¯è¯

MIT License

---

## âš ï¸ å…è´£å£°æ˜

æœ¬é¡¹ç›®ä»…ä¾›æ•™è‚²å’Œç ”ç©¶ç›®çš„ã€‚åœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨å‰ï¼Œè¯·å……åˆ†äº†è§£é£é™©ï¼š
- é—ªç”µè´·å¥—åˆ©æ¶‰åŠå¤æ‚çš„æ™ºèƒ½åˆçº¦äº¤äº’
- Gas è´¹ç”¨å¯èƒ½å¯¼è‡´äºæŸ
- å¸‚åœºæ¡ä»¶ç¬æ¯ä¸‡å˜
- è¯·å‹¿æŠ•å…¥æ— æ³•æ‰¿å—æŸå¤±çš„èµ„é‡‘

---

*æ–‡æ¡£ç”Ÿæˆæ—¶é—´: 2024å¹´12æœˆ*

